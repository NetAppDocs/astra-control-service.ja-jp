---
sidebar: sidebar 
permalink: use/protect-apps.html 
keywords: backup, back up, backup apps, back up apps, snapshots, snapshot an app, take a snapshot, take a backup, view backups, view snapshots, set policy, set schedule, schedule backups, schedule snapshots 
summary: 自動保護ポリシーまたはアドホックベースを使用してスナップショットやバックアップを作成することで、アプリケーションを保護します。 
---
= Snapshot とバックアップでアプリケーションを保護
:hardbreaks:
:allow-uri-read: 
:icons: font
:imagesdir: ../media/use/


自動保護ポリシーまたはアドホックベースを使用してスナップショットやバックアップを作成することで、アプリケーションを保護します。Astra の UI またはを使用できます https://docs.netapp.com/us-en/astra-automation/index.html["Astra Control API"^] アプリを保護します。



== Snapshot とバックアップ

a_snapshot_は 、アプリケーションと同じプロビジョニングボリュームに格納されるアプリケーションのポイントインタイムコピーです。通常は高速です。ローカル Snapshot を使用して、アプリケーションを以前の時点にリストアします。

a_backup_ は、クラウドのオブジェクトストレージに格納されます。ローカル Snapshot に比べてバックアップに時間がかかる場合があります。ただし、クラウドのリージョン間でアクセスできるため、アプリケーションの移行が可能です。バックアップの保持期間を延長することもできます。


CAUTION: _ 最新のバックアップがあるまで、完全に保護することはできません _ 。これは、永続ボリュームから離れたオブジェクトストアにバックアップが格納されるために重要です。障害や事故によってクラスタとその永続的ストレージが損傷した場合は、バックアップをリカバリする必要があります。スナップショットを使用してリカバリすることはできません。


NOTE: スナップショットまたはバックアップを実行しても、操作が失敗し、「The resource was n't created because of an internal server問題 」というエラーが表示された場合は、使用しているストレージバックエンドに正しいドライバがインストールされていることを確認します。ストレージバックエンドの中には、Container Storage Interface（CSI）ドライバを必要とするものと、外部スナップショットコントローラを必要とするものがあります。

アプリケーションデータの保護に関連する次のタスクを実行できます。

* <<Configure a protection policy>>
* <<Create a snapshot>>
* <<Create a backup>>
* <<View snapshots and backups>>
* <<Delete snapshots>>
* <<Cancel backups>>
* <<Delete backups>>




== 保護ポリシーを設定します

保護ポリシーは、定義されたスケジュールでスナップショット、バックアップ、またはその両方を作成することでアプリケーションを保護します。Snapshot とバックアップを毎時、日次、週次、および月単位で作成し、保持するコピーの数を指定できます。1 時間に 1 回以上の頻度でバックアップや Snapshot を実行する必要がある場合は、次の方法があります https://docs.netapp.com/us-en/astra-automation/workflows/workflows_before.html["Astra Control REST API を使用して、スナップショットとバックアップを作成"^]。

.手順
. 「 * アプリケーション」を選択し、管理アプリの名前を選択します。
. [ * データ保護 * ] を選択します。
. ［ 保護ポリシーの設定 ］ を選択します。
. 毎時、毎日、毎週、および毎月のスケジュールで保持する Snapshot とバックアップの数を選択して、保護スケジュールを定義します。
+
スケジュールは、毎時、毎日、毎週、および毎月の各スケジュールで同時に定義できます。Snapshot とバックアップの保持レベルを設定するまで、スケジュールはアクティブになりません。

+
バックアップの保持レベルを設定する際に、バックアップを格納するバケットを選択できます。

+
次の例では、 Snapshot とバックアップの保護スケジュールとして、毎時、毎日、毎週、毎月の 4 つを設定します。

+
image:screenshot-protection-policy.png["Snapshot とバックアップを毎時、毎日、毎週、または毎月作成する設定ポリシーの例のスクリーンショット。"]

. [* Review （レビュー） ] を選択します
. 「 * Configure * 」を選択します。
+
以下は、これらの各手順を紹介するビデオです。

+
video::video-set-protection-policy.mp4[width=848,height=480]


Astra Control は、定義したスケジュールと保持ポリシーを使用して、スナップショットとバックアップを作成し、保持することによって、データ保護ポリシーを実装します。



== Snapshot を作成します

オンデマンド Snapshot はいつでも作成できます。

.手順
. 「 * アプリケーション * 」を選択します。
. 目的のアプリケーションの [ * アクション * （ * Actions * ） ] 列でドロップダウンリストを選択します。
. 「 * Snapshot * 」を選択します。
. スナップショットの名前をカスタマイズし、「 * レビュー情報 * 」を選択します。
. スナップショットの概要を確認し、 * スナップショットアプリ * を選択します。


Astra Control は、アプリケーションのスナップショットを作成します。



== バックアップを作成します

アプリケーションはいつでもバックアップできます。

.手順
. 「 * アプリケーション * 」を選択します。
. 目的のアプリケーションの [ * アクション * （ * Actions * ） ] 列でドロップダウンリストを選択します。
. 「 * Backup * 」を選択します。
. バックアップの名前をカスタマイズし、既存のスナップショットからアプリケーションをバックアップするかどうかを選択し、「 * 情報の確認 * 」を選択します。
. バックアップの概要を確認して、「 * バックアップアプリ * 」を選択します。


Astra Control ：アプリケーションのバックアップを作成



== Snapshot とバックアップを表示します

アプリケーションのスナップショットとバックアップは、 [ データ保護（ Data Protection ） ] タブで表示できます。

.手順
. 「 * アプリケーション」を選択し、管理アプリの名前を選択します。
. [ * データ保護 * ] を選択します。
+
デフォルトでは、 Snapshot が表示されます。

. バックアップのリストを表示するには、「 * Backups * 」を選択します。




== Snapshot を削除します

不要になったスケジュール済みまたはオンデマンドの Snapshot を削除します。

.手順
. 「 * アプリケーション」を選択し、管理アプリの名前を選択します。
. [ * データ保護 * ] を選択します。
. 目的のスナップショットの [* アクション * （ * Actions * ） ] 列でドロップダウンリストを選択します。
. 「 * スナップショットの削除 * 」を選択します。
. 削除を確認するスナップショットの名前を入力し、 * はい、スナップショットを削除 * を選択します。


Astra Control がスナップショットを削除します。



== バックアップをキャンセルします

実行中のバックアップをキャンセルすることができます。


TIP: バックアップをキャンセルするには、そのバックアップが実行中の状態である必要があります。Pending状態のバックアップはキャンセルできません。

.手順
. 「 * アプリケーション」を選択し、アプリケーションの名前を選択します。
. [ * データ保護 * ] を選択します。
. 「 * Backups * 」を選択します。
. 目的のバックアップの[*アクション*（* Actions *）]列の[オプション（Options）]メニューから、[*キャンセル*（* Cancel *）]を選択します。
. 削除を確認するために「CANCEL」と入力し、「* Yes、cancel backup *」を選択します。




== バックアップを削除します

不要になったスケジュール済みまたはオンデマンドのバックアップを削除します。

. 「 * アプリケーション」を選択し、管理アプリの名前を選択します。
. [ * データ保護 * ] を選択します。
. 「 * Backups * 」を選択します。
. 目的のバックアップの [* アクション * ] 列のドロップダウン・リストを選択します。
. [ * バックアップの削除 * ] を選択します。
. 削除を確認するバックアップの名前を入力し、 * はい、バックアップを削除 * を選択します。


Astra Control がバックアップを削除する。
