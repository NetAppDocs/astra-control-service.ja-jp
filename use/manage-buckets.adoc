---
sidebar: sidebar 
permalink: use/manage-buckets.html 
keywords: bucket, buckets, add buckets, change default bucket, default, default bucket, remove bucket, delete bucket 
summary: Astra がバックアップとクローンに使用するバケットを管理するには、バケットを追加し、クラウドプロバイダ内のクラスタのデフォルトバケットを変更します。 
---
= バケットを管理する
:hardbreaks:
:icons: font
:imagesdir: ../media/use/


Astra がバックアップとクローンに使用するバケットを管理するには、バケットを追加し、クラウドプロバイダ内の Kubernetes クラスタのデフォルトバケットを変更します。

バケットを追加および変更できるのは Admin のみです。



== Astra Control でのバケットの使用方法

最初の Kubernetes クラスタの管理を開始すると、 Astra Control Service が、管理対象クラスタと同じ場所にクラウドプロバイダのデフォルトバケットを作成します。

Astra Control Service は、作成したバックアップとクローンにこのデフォルトバケットを使用します。その後、バックアップを使用して、クラスタ間でアプリケーションのリストアやクローニングを行うことができます。

Astra Control Service にバケットを追加する場合は、保護ポリシーの作成時にこれらのバケットから選択できます。また、 Astra Control Service がアドホックバックアップやクローンに使用するデフォルトバケットを変更することもできます。


TIP: Astra Control Service は、バックアップまたはクローンを開始する前に、デスティネーションバケットがアクセス可能かどうかをチェックします。



== 既存のバケットを表示します

Astra Control Service で使用可能なバケットのリストを表示して、クラウドプロバイダのステータスを確認したり、デフォルトのバケットを特定したりできます。

バケットの状態は次のいずれかになります。

保留中です:: バケットを追加すると、最初に Pending 状態から Astra Control が初めてバケットを参照します。
利用可能:: バケットは Astra Control で使用できます。
削除されました::
+
--
バケットが Removed 状態の場合でも、バケットをデフォルトのバケットとして設定し、保護スケジュールに割り当てることができます。ただし、データ保護処理の開始時点でバケットが「 available 」状態でない場合は、処理が失敗します。

--


.ステップ
. [ * ストレージの管理 * ] で、 [ * バケット * ] を選択します。
+
Astra Control Service で使用できるバケットのリストが表示されます。

+
次の例からわかるように、使用できるバケットは 1 つだけです。つまり、ネットアップが作成したデフォルトのバケットです。

+
image:screenshot_buckets_list.png["バケットページ内の 1 つのバケットを示すスクリーンショット。"]





== 追加のバケットを追加します

クラウドプロバイダでクラスタの管理を開始したら、いつでもバケットを追加できます。これにより、保護ポリシーの作成時にバケットを選択したり、アドホックバックアップやクローンのデフォルトバケットを変更したりできます。

Astra Control Service では、バケットを追加したあとに削除できないことに注意してください。

.必要なもの
* クラウドプロバイダ内の既存のバケットの名前。
* バケットが Azure 内にある場合は、 _Astra -backup -rg_ という名前のリソースグループに属している必要があります。


.手順
. [ * ストレージの管理 * ] で、 [ * バケット * ] を選択します。
. 「 * Add * 」を選択し、プロンプトに従ってバケットを追加します。
+
** * タイプ * ：クラウドプロバイダを選択します。
+
クラウドプロバイダを利用できるのは、 Astra Control Service がクラウドプロバイダで実行されているクラスタの管理を開始したあとのみです。

** * 既存のバケット名 * ：バケットの名前を入力します。
** * 概要 * ：必要に応じて、バケットの概要を入力します。
** * このバケットをこのクラウドのデフォルトバケットにする * ：このバケットをアドホックバックアップやクローンのデフォルトバケットとして使用するかどうかを選択します。
** * クレデンシャルを選択 * ：バケットを管理するために必要な権限を Astra Control Service に付与するクレデンシャルを選択します。
+
Google Cloud Platform に新しいバケットを追加する例を次に示します。

+
image:screenshot_buckets_add.png["バケットページ内の 1 つのバケットを示すスクリーンショット。"]



. 「 * Add * 」を選択してバケットを追加します。


Astra Control Service は、追加のバケットを追加します。保護ポリシーの作成時にバケットを選択できるようになりました。



== デフォルトバケットを変更する

バックアップとクローンに Astra Control Service で使用するデフォルトバケットを変更する。各クラウドプロバイダには、独自のデフォルトバケットがあります。

Astra Control Service では、クラウドプロバイダ用のデフォルトバケットを使用して、既存のバックアップからクローニングすることを選択しなかった場合に、アドホックバックアップやアドホッククローンを作成します。

.手順
. [ * ストレージの管理 * ] で、 [ * バケット * ] を選択します。
. 編集するバケットの「 * Actions * 」列でドロップダウンリストを選択します。
. このバケットをこのクラウドのデフォルトバケットにする * を選択します。
. 「 * Update * 」を選択します。

